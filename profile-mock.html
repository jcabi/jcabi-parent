<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>jcabi-parent &#x2013; "Mock" Profile for Building of a "-mock.jar" artifact</title>
        <link media="all" rel="stylesheet" type="text/css" href="./css/jcabi.css"/>
                    <meta name="author" content="Yegor Bugayenko" />
                            <script>
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-1963507-23']);
                _gaq.push(['_trackPageview']);
                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
                                            <script src="https://code.jquery.com/jquery-2.1.0.min.js"></script>
        <script src="./js/jcabi.js"></script>
    </head>
    <body>
                <div class="page" itemscope="" itemtype="http://schema.org/BlogPosting">
            <nav class="menu-section">
                <ul class="menu" id="menu">
                                                                                    <li>
                            <span>Overview</span>
                                                            <ul>
                                                                                                    <li >
                            <span>                        <a href="index.html" title="Introduction">Introduction</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="dependencyManagement.html" title="Dependencies">Dependencies</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="pluginManagement.html" title="Plugins">Plugins</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                        </ul>
                                                    </li>
                                            <li>
                            <span>Profiles</span>
                                                            <ul>
                                                                                                    <li >
                            <span>                        <a href="profile-aspectj.html" title="aspectj">aspectj</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-clojure.html" title="clojure">clojure</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-groovy.html" title="groovy">groovy</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li  class='active' >
                            <span>                        <a href="profile-mock.html" title="mock">mock</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-qulice.html" title="qulice">qulice</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-site.html" title="site">site</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-sonatype.html" title="sonatype">sonatype</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                        </ul>
                                                    </li>
                                            <li>
                            <span>Implicit Profiles</span>
                                                            <ul>
                                                                                                    <li >
                            <span>                        <a href="profile-antlr3.html" title="jcabi-antlr3">jcabi-antlr3</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-junit.html" title="jcabi-junit">jcabi-junit</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                                                        <li >
                            <span>                        <a href="profile-slf4j.html" title="jcabi-slf4j">jcabi-slf4j</a>
        </span>
                                                                                                                                                                <ul>
                                                                    </ul>
                                                    </li>
                                                                                        </ul>
                                                    </li>
                                    </ul>
            </nav>
            <div class="right-side">
                <main>
                    <div class="content">
                        <header>
                            <div class="logo">
                                <a href="../"
                                    title=" logo ">
                                    <img src="../logo-square.svg"
                                        alt="jcabi"
                                                                                    width="64"
                                                                                                                            height="64"
                                                                                itemprop="image"
                                    />
                                </a>
                            </div>
                            <ul class="badges">
                                <li>
                                    <strong itemprop="version">0.59.0</strong>
                                </li>
                                <li>
                                    
                                    <time itemprop="datePublished" datetime="2022-07-13T05:33:44Z">
                                        
                                        13-Jul-2022
                                    </time>
                                </li>
                                <li class="menu-button">menu</li>
                            </ul>
                        </header>
                        <div id="here-goes-menu" class="menu-off"></div>
                                                                            <a href="https://github.com/jcabi/jcabi-parent">
                                <img src="https://www.jcabi.com/fork-me.svg" class="fork-me"/>
                            </a>
                                                <article itemprop="articleBody">
                            <section>
<h2><a name="a.22Mock.22_Profile_for_Building_of_a_.22-mock.jar.22_artifact"></a>&quot;Mock&quot; Profile for Building of a &quot;-mock.jar&quot; artifact</h2>
<p>Profile <code>mock</code> is activated automatically when there is a <code>src/mock/java</code> directory in the project. The profile adds this directory to the list of test directories and compiles and packages its content into a JAR with a <code>mock</code> classifier. Only classes that named as <code>*Mocker.java</code> or <code>*Mocker$*.java</code> are included into the JAR.</p>
<p>This mechanism is very helpful when you develop an API that contains interfaces that have to be mocked in other modules or projects. For example, these are the interfaces from your public API in module <code>example-api</code>:</p>
<div class="source">
<pre>package com.example;
public interface Document {
  String content();
}
public interface Printer {
  void print(Document doc);
}</pre></div>
<p>Class <code>Printer</code> expects an instance of <code>Document</code> as a single parameter of method <code>print()</code>. In another module, say, <code>example-printer</code> you want to implement a <code>Printer</code> and to mock a <code>Document</code> in order to test it:</p>
<div class="source">
<pre>import org.junit.Test;
import org.mockito.Mockito;
public PrinterTest {
  @Test
  public void testPrinting() {
    Printer printer = new PrinterImpl();
    Document doc = Mockito.mock(Document.class);
    Mockito.doReturn(&quot;some test content&quot;).when(document).content();
    printer.print(doc);
    Mockito.verify(doc).content();
  }
}</pre></div>
<p>A more convenient way to do it is to ship a mocker together with an interface:</p>
<div class="source">
<pre>public DocumentMocker {
  private Document doc = Mockito.mock(Document.class);
  public DocumentMocker withContent(String text) {
    Mockito.doReturn(text).when(this.doc).content();
    return this;
  }
  public Document mock() {
    return this.doc;
  }
}</pre></div>
<p>This mocker will be used as following:</p>
<div class="source">
<pre>import org.junit.Test;
public PrinterTest {
  @Test
  public void testPrinting() {
    Printer printer = new PrinterImpl();
    Document doc = new DocumentMocker()
      .withContent(&quot;some test content&quot;)
      .mock();
    printer.print(doc);
    Mockito.verify(doc).content();
  }
}</pre></div>
<p>For complex interfaces such mockers may become a very convenient tool.</p>
<p>Place the mocker into <code>src/mock/java/com/example/DocumentMocker.java</code> file and it will be compiled and packaged into <code>example-api-1.0-SNAPSHOT-mock.jar</code> artifact. Later, in order to add this artifact to the <code>example-core</code> module use this dependency definition:</p>
<div class="source">
<pre>&lt;dependency&gt;
  &lt;groupId&gt;com.example&lt;/groupId&gt;
  &lt;artifactId&gt;example-api&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;classifier&gt;mock&lt;/classifier&gt; &lt;!-- this is the trick --&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div></section>
                        </article>
                    </div>
                </main>
                <footer class="legal-notes">
                    <div>
                        Copyright &#169;
                                                                            2012-2022
                                            </div>
                    <div>jcabi.com, All Rights Reserved.</div>
                    <div><a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a>.</div>
                </footer>
            </div>
        </div>
    </body>
</html>
